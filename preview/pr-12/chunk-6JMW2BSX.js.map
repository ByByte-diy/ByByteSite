{
  "version": 3,
  "sources": ["src/app/services/lessons.service.ts", "src/assets/content/index.json", "src/app/services/lesson-icons.service.ts"],
  "sourcesContent": ["import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject, signal, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Observable, catchError, map, of, tap } from 'rxjs';\nimport { Lesson, LessonIndex, LessonMeta } from '../models/lesson.model';\nimport { environment } from '../../environments/environment';\nimport lessonsIndexData from '../../assets/content/index.json';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LessonsService {\n  private readonly _http = inject(HttpClient);\n  private readonly platformId = inject(PLATFORM_ID);\n\n  // Signals for reactive state\n  private _lessonsIndex = signal<LessonIndex | null>(null);\n  private _currentLesson = signal<Lesson | null>(null);\n  private _isLoading = signal<boolean>(false);\n  private _error = signal<string | null>(null);\n\n  // Getters for public access to signals\n  public get lessonsIndex() {\n    return this._lessonsIndex;\n  }\n\n  public get currentLesson() {\n    return this._currentLesson;\n  }\n\n  public get isLoading() {\n    return this._isLoading;\n  }\n\n  public get error() {\n    return this._error;\n  }\n\n  /**\n   * Load lessons index from JSON file, generated during CI\n   */\n  public loadLessonsIndex(): Observable<LessonIndex> {\n    this._isLoading.set(true);\n    this._error.set(null);\n\n    return of(lessonsIndexData as LessonIndex).pipe(\n      tap((index) => {\n        this._lessonsIndex.set(index);\n        this._isLoading.set(false);\n      }),\n      catchError((err) => {\n        this._error.set('Failed to load lessons index');\n        this._isLoading.set(false);\n        console.error('Error loading lessons index:', err);\n        return of({ lessons: [], platforms: [], levels: [], tags: [], languages: [] });\n      }),\n    );\n  }\n\n  /**\n   * Load specific lesson by its slug, language and platform\n   */\n  public loadLesson(slug: string, lang: string, platform: string): Observable<Lesson | null> {\n    this._isLoading.set(true);\n    this._error.set(null);\n\n    // First, find metadata in index\n    const lessonMeta = this._findLessonMeta(slug, lang, platform);\n\n    if (!lessonMeta) {\n      this._error.set(`Lesson not found: ${slug}`);\n      this._isLoading.set(false);\n      return of(null);\n    }\n\n    // Build path to lesson file\n    const contentPath = this._buildLessonPath(lessonMeta);\n\n    // Load lesson content - —Ä—ñ–∑–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏ –¥–ª—è server-side —Ç–∞ browser\n    if (!isPlatformBrowser(this.platformId)) {\n      // Server-side: —á–∏—Ç–∞—î–º–æ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ fs\n      try {\n        const fs = require('fs');\n        const path = require('path');\n        const filePath = path.join(\n          process.cwd(),\n          'src/assets/content',\n          lang,\n          platform,\n          lessonMeta.level,\n          `${slug}.md`,\n        );\n        const content = fs.readFileSync(filePath, 'utf8');\n\n        const lesson: Lesson = {\n          ...lessonMeta,\n          content,\n          contentPath,\n        };\n        this._currentLesson.set(lesson);\n        this._isLoading.set(false);\n        return of(lesson);\n      } catch (error) {\n        console.error('Error reading lesson file:', error);\n        const lesson: Lesson = {\n          ...lessonMeta,\n          content: '',\n          contentPath,\n        };\n        this._currentLesson.set(lesson);\n        this._isLoading.set(false);\n        return of(lesson);\n      }\n    }\n\n    // Browser: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ HTTP –∑–∞–ø–∏—Ç\n    return this._http.get(contentPath, { responseType: 'text' }).pipe(\n      map((content) => {\n        const lesson: Lesson = {\n          ...lessonMeta,\n          content,\n          contentPath,\n        };\n\n        this._currentLesson.set(lesson);\n        this._isLoading.set(false);\n        return lesson;\n      }),\n      catchError((err) => {\n        this._error.set(`Failed to load lesson: ${slug}`);\n        this._isLoading.set(false);\n        console.error(`Error loading lesson ${slug}:`, err);\n        return of(null);\n      }),\n    );\n  }\n\n  /**\n   * Filter lessons by given criteria\n   */\n  public filterLessons(options: {\n    platform?: string;\n    level?: string;\n    lang?: string;\n    tag?: string;\n    searchTerm?: string;\n  }): LessonMeta[] {\n    const index = this._lessonsIndex();\n    if (!index) return [];\n\n    return index.lessons.filter((lesson) => {\n      // Filter by platform\n      if (options.platform && !lesson.platforms.includes(options.platform)) {\n        return false;\n      }\n\n      // Filter by level\n      if (options.level && lesson.level !== options.level) {\n        return false;\n      }\n\n      // Filter by language\n      if (options.lang && lesson.lang !== options.lang) {\n        return false;\n      }\n\n      // Filter by tag\n      if (options.tag && !lesson.tags.includes(options.tag)) {\n        return false;\n      }\n\n      // Filter by search term\n      if (options.searchTerm) {\n        const term = options.searchTerm.toLowerCase();\n        return (\n          lesson.title.toLowerCase().includes(term) ||\n          lesson.description?.toLowerCase().includes(term) ||\n          lesson.tags.some((tag) => tag.toLowerCase().includes(term))\n        );\n      }\n\n      return true;\n    });\n  }\n\n  /**\n   * Find lesson metadata in index\n   */\n  private _findLessonMeta(slug: string, lang: string, platform: string): LessonMeta | null {\n    const index = this._lessonsIndex();\n    if (!index) return null;\n\n    return (\n      index.lessons.find(\n        (lesson) =>\n          lesson.slug === slug && lesson.lang === lang && lesson.platforms.includes(platform),\n      ) || null\n    );\n  }\n\n  /**\n   * Build path to lesson file\n   */\n  private _buildLessonPath(lesson: LessonMeta): string {\n    // Path format: /content/{lang}/{platform}/{level}/{slug}.md\n    return `${environment.contentBasePath}/${lesson.lang}/${lesson.platforms[0]}/${lesson.level}/${lesson.slug}.md`;\n  }\n}\n", "{\n  \"lessons\": [\n    {\n      \"title\": \"Blinking LED\",\n      \"slug\": \"blink\",\n      \"lang\": \"en\",\n      \"platforms\": [\n        \"arduino\"\n      ],\n      \"level\": \"beginner\",\n      \"tags\": [\n        \"led\",\n        \"digital outputs\"\n      ],\n      \"published\": true,\n      \"version\": \"1.0.0\",\n      \"description\": \"Classic example with a blinking LED for Arduino.\",\n      \"duration\": null,\n      \"difficulty\": null\n    },\n    {\n      \"title\": \"\u041C\u0438\u0433\u0430\u044E\u0447\u0438\u0439 \u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434\",\n      \"slug\": \"blink\",\n      \"lang\": \"uk\",\n      \"platforms\": [\n        \"arduino\"\n      ],\n      \"level\": \"beginner\",\n      \"tags\": [\n        \"\u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434\",\n        \"\u0446\u0438\u0444\u0440\u043E\u0432\u0456 \u0432\u0438\u0445\u043E\u0434\u0438\"\n      ],\n      \"published\": true,\n      \"version\": \"1.0.0\",\n      \"description\": \"\u041A\u043B\u0430\u0441\u0438\u0447\u043D\u0438\u0439 \u043F\u0440\u0438\u043A\u043B\u0430\u0434 \u0437 \u043C\u0438\u0433\u0430\u044E\u0447\u0438\u043C \u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434\u043E\u043C \u0434\u043B\u044F Arduino.\",\n      \"duration\": null,\n      \"difficulty\": null\n    }\n  ],\n  \"platforms\": [\n    \"arduino\"\n  ],\n  \"levels\": [\n    \"beginner\"\n  ],\n  \"tags\": [\n    \"digital outputs\",\n    \"led\",\n    \"\u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434\",\n    \"\u0446\u0438\u0444\u0440\u043E\u0432\u0456 \u0432\u0438\u0445\u043E\u0434\u0438\"\n  ],\n  \"languages\": [\n    \"en\",\n    \"uk\"\n  ],\n  \"generatedAt\": \"2025-11-10T19:19:51.345Z\",\n  \"totalLessons\": 2\n}", "import { Injectable } from '@angular/core';\n\n/**\n * –°–µ—Ä–≤—ñ—Å –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–∫–æ–Ω–æ–∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º —Ç–∞ —Ä—ñ–≤–Ω—ñ–≤ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ —É—Ä–æ–∫—ñ–≤\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LessonIconsService {\n  /**\n   * –ü–æ–≤–µ—Ä—Ç–∞—î —ñ–∫–æ–Ω–∫—É –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏\n   */\n  getPlatformIcon(platform: string): string {\n    const icons: Record<string, string> = {\n      arduino: 'üîå',\n      raspberry: 'üçì',\n      esp8266: 'üì°',\n      esp32: 'üì°',\n      default: 'ü§ñ',\n    };\n\n    return icons[platform] || icons['default'];\n  }\n\n  /**\n   * –ü–æ–≤–µ—Ä—Ç–∞—î —ñ–∫–æ–Ω–∫—É –¥–ª—è —Ä—ñ–≤–Ω—è —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ\n   */\n  getLevelIcon(level: string): string {\n    const icons: Record<string, string> = {\n      beginner: 'üü¢',\n      intermediate: 'üü°',\n      advanced: 'üî¥',\n      default: '‚ö™',\n    };\n\n    return icons[level] || icons['default'];\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
