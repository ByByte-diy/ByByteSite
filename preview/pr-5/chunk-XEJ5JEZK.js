import{b as _}from"./chunk-JE6XUTR5.js";import{r as c}from"./chunk-RMAMC2FW.js";import{L as m,O as l,T as h,fa as o,j as a,n as L,w as u}from"./chunk-Q37A7JF6.js";import{a as f,b as p}from"./chunk-2VMXMS7J.js";var v=class i{_http=h(_);_lessonsIndex=o(null);_currentLesson=o(null);_isLoading=o(!1);_error=o(null);get lessonsIndex(){return this._lessonsIndex}get currentLesson(){return this._currentLesson}get isLoading(){return this._isLoading}get error(){return this._error}loadLessonsIndex(){return this._isLoading.set(!0),this._error.set(null),this._http.get(`${c.contentBasePath}/index.json`).pipe(m(e=>{this._lessonsIndex.set(e),this._isLoading.set(!1)}),u(e=>(this._error.set("Failed to load lessons index"),this._isLoading.set(!1),console.error("Error loading lessons index:",e),a({lessons:[],platforms:[],levels:[],tags:[],languages:[]}))))}loadLesson(e,t,s){this._isLoading.set(!0),this._error.set(null);let r=this._findLessonMeta(e,t,s);if(!r)return this._error.set(`Lesson not found: ${e}`),this._isLoading.set(!1),a(null);let n=this._buildLessonPath(r);return this._http.get(n,{responseType:"text"}).pipe(L(d=>{let g=p(f({},r),{content:d,contentPath:n});return this._currentLesson.set(g),this._isLoading.set(!1),g}),u(d=>(this._error.set(`Failed to load lesson: ${e}`),this._isLoading.set(!1),console.error(`Error loading lesson ${e}:`,d),a(null))))}filterLessons(e){let t=this._lessonsIndex();return t?t.lessons.filter(s=>{if(e.platform&&!s.platforms.includes(e.platform)||e.level&&s.level!==e.level||e.lang&&s.lang!==e.lang||e.tag&&!s.tags.includes(e.tag))return!1;if(e.searchTerm){let r=e.searchTerm.toLowerCase();return s.title.toLowerCase().includes(r)||s.description?.toLowerCase().includes(r)||s.tags.some(n=>n.toLowerCase().includes(r))}return!0}):[]}_findLessonMeta(e,t,s){let r=this._lessonsIndex();return r&&r.lessons.find(n=>n.slug===e&&n.lang===t&&n.platforms.includes(s))||null}_buildLessonPath(e){return`${c.contentBasePath}/${e.lang}/${e.platforms[0]}/${e.level}/${e.slug}.md`}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};var b=class i{getPlatformIcon(e){let t={arduino:"\u{1F50C}",raspberry:"\u{1F353}",esp8266:"\u{1F4E1}",esp32:"\u{1F4E1}",default:"\u{1F916}"};return t[e]||t.default}getLevelIcon(e){let t={beginner:"\u{1F7E2}",intermediate:"\u{1F7E1}",advanced:"\u{1F534}",default:"\u26AA"};return t[e]||t.default}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{v as a,b};
