import{B as d,Fa as m,G as b,Ja as I,La as P,Na as x,Ra as j,b as a,c as h,g as f,jb as y,m as _,n as D,p as g,t as p}from"./chunk-IMSOYEQO.js";import{a as u,b as c,c as L}from"./chunk-ASRB7XND.js";j();m();P();D();var M={lessons:[{title:"Blinking LED",slug:"blink",lang:"en",platforms:["arduino"],level:"beginner",tags:["led","digital outputs"],published:!0,version:"1.0.0",description:"Classic example with a blinking LED for Arduino.",duration:null,difficulty:null},{title:"\u041C\u0438\u0433\u0430\u044E\u0447\u0438\u0439 \u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434",slug:"blink",lang:"uk",platforms:["arduino"],level:"beginner",tags:["\u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434","\u0446\u0438\u0444\u0440\u043E\u0432\u0456 \u0432\u0438\u0445\u043E\u0434\u0438"],published:!0,version:"1.0.0",description:"\u041A\u043B\u0430\u0441\u0438\u0447\u043D\u0438\u0439 \u043F\u0440\u0438\u043A\u043B\u0430\u0434 \u0437 \u043C\u0438\u0433\u0430\u044E\u0447\u0438\u043C \u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434\u043E\u043C \u0434\u043B\u044F Arduino.",duration:null,difficulty:null}],platforms:["arduino"],levels:["beginner"],tags:["digital outputs","led","\u0441\u0432\u0456\u0442\u043B\u043E\u0434\u0456\u043E\u0434","\u0446\u0438\u0444\u0440\u043E\u0432\u0456 \u0432\u0438\u0445\u043E\u0434\u0438"],languages:["en","uk"],generatedAt:"2025-11-14T12:37:04.279Z",totalLessons:2};m();var w=class o{_http=p(x);platformId=p(b);_lessonsIndex=d(null);_currentLesson=d(null);_isLoading=d(!1);_error=d(null);get lessonsIndex(){return this._lessonsIndex}get currentLesson(){return this._currentLesson}get isLoading(){return this._isLoading}get error(){return this._error}loadLessonsIndex(){return this._isLoading.set(!0),this._error.set(null),a(M).pipe(_(e=>{this._lessonsIndex.set(e),this._isLoading.set(!1)}),f(e=>(this._error.set("Failed to load lessons index"),this._isLoading.set(!1),console.error("Error loading lessons index:",e),a({lessons:[],platforms:[],levels:[],tags:[],languages:[]}))))}loadLesson(e,s,n){this._isLoading.set(!0),this._error.set(null);let t=this._findLessonMeta(e,s,n);if(!t)return this._error.set(`Lesson not found: ${e}`),this._isLoading.set(!1),a(null);let r=this._buildLessonPath(t);if(!I(this.platformId))try{let i=L("fs"),k=L("path").join(process.cwd(),"src/assets/content",s,n,t.level,`${e}.md`),C=i.readFileSync(k,"utf8"),v=c(u({},t),{content:C,contentPath:r});return this._currentLesson.set(v),this._isLoading.set(!1),a(v)}catch(i){console.error("Error reading lesson file:",i);let l=c(u({},t),{content:"",contentPath:r});return this._currentLesson.set(l),this._isLoading.set(!1),a(l)}return this._http.get(r,{responseType:"text"}).pipe(h(i=>{let l=c(u({},t),{content:i,contentPath:r});return this._currentLesson.set(l),this._isLoading.set(!1),l}),f(i=>(this._error.set(`Failed to load lesson: ${e}`),this._isLoading.set(!1),console.error(`Error loading lesson ${e}:`,i),a(null))))}filterLessons(e){let s=this._lessonsIndex();return s?s.lessons.filter(n=>{if(e.platform&&!n.platforms.includes(e.platform)||e.level&&n.level!==e.level||e.lang&&n.lang!==e.lang||e.tag&&!n.tags.includes(e.tag))return!1;if(e.searchTerm){let t=e.searchTerm.toLowerCase();return n.title.toLowerCase().includes(t)||n.description?.toLowerCase().includes(t)||n.tags.some(r=>r.toLowerCase().includes(t))}return!0}):[]}_findLessonMeta(e,s,n){let t=this._lessonsIndex();return t&&t.lessons.find(r=>r.slug===e&&r.lang===s&&r.platforms.includes(n))||null}_buildLessonPath(e){return`${y.contentBasePath}/${e.lang}/${e.platforms[0]}/${e.level}/${e.slug}.md`}static \u0275fac=function(s){return new(s||o)};static \u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"})};m();var $=class o{platformIconMap={arduino:"assets/icons/platforms/arduino.svg",bybyte_mega:"assets/icons/platforms/bybyte.svg",bybyte_nano:"assets/icons/platforms/bybyte.svg",default:"assets/icons/platforms/default.svg"};levelIconMap={starter:"assets/icons/levels/starter.svg",beginner:"assets/icons/levels/beginner.svg",middle:"assets/icons/levels/middle.svg",advanced:"assets/icons/levels/advanced.svg",expert:"assets/icons/levels/expert.svg",default:"assets/icons/levels/default.svg"};getPlatformIcon(e){if(!e)return this.platformIconMap.default;let s=e.toLowerCase();return this.platformIconMap[s]??this.platformIconMap.default}getLevelIcon(e){if(!e)return this.levelIconMap.default;let s=e.toLowerCase();return this.levelIconMap[s]??this.levelIconMap.default}static \u0275fac=function(s){return new(s||o)};static \u0275prov=g({token:o,factory:o.\u0275fac,providedIn:"root"})};export{w as a,$ as b};
