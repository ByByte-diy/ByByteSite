import{a as D,b as U}from"./chunk-XEJ5JEZK.js";import{c as B,e as z}from"./chunk-7PP3K45Z.js";import"./chunk-JE6XUTR5.js";import{h as P,o as Q,p as y,q as M}from"./chunk-RMAMC2FW.js";import{Ab as O,Bb as s,Cb as c,Db as x,Eb as k,Ga as i,Gb as a,Hb as d,Ka as G,Oa as N,T as h,Ta as b,Z as I,_ as S,ab as f,bb as v,db as T,eb as L,fb as E,gb as R,hb as _,ib as m,jb as w,kb as l,lb as r,pb as F,qb as J,rb as K,sb as C,tb as p}from"./chunk-Q37A7JF6.js";import"./chunk-2VMXMS7J.js";function X(t,n){if(t&1){let e=F();l(0,"button",6),C("click",function(){let g=I(e).$implicit,u=p();return S(u.onPlatformChange(g))}),s(1),a(2,"translate"),r()}if(t&2){let e=n.$implicit,o=p();O("active",o.selectedPlatform===e),i(),x(" ",d(2,3,"lessons.platform."+e)," ")}}function Z(t,n){if(t&1){let e=F();l(0,"button",6),C("click",function(){let g=I(e).$implicit,u=p();return S(u.onLevelChange(g))}),s(1),a(2,"translate"),r()}if(t&2){let e=n.$implicit,o=p();O("active",o.selectedLevel===e),i(),x(" ",d(2,3,"lessons.level."+e)," ")}}function ee(t,n){if(t&1){let e=F();l(0,"span",12),C("click",function(){let g=I(e).$implicit,u=p(2);return S(u.onTagChange(g===u.selectedTag?null:g))}),s(1),r()}if(t&2){let e=n.$implicit,o=p(2);O("active",o.selectedTag===e),i(),x(" ",e," ")}}function te(t,n){if(t&1&&(l(0,"div",4)(1,"label"),s(2),a(3,"translate"),r(),l(4,"div",10),L(5,ee,2,3,"span",11,T),r()()),t&2){let e=p();i(2),c(d(3,1,"lessons.filter.tags")),i(3),E(e.tags)}}var V=class t{platforms=[];levels=[];tags=[];selectedPlatform=null;selectedLevel=null;selectedTag=null;searchTerm="";filterChange=new G;onPlatformChange(n){this.selectedPlatform=n,this.emitFilterChange()}onLevelChange(n){this.selectedLevel=n,this.emitFilterChange()}onTagChange(n){this.selectedTag=n,this.emitFilterChange()}onSearchChange(n){this.searchTerm=n.target.value,this.emitFilterChange()}resetFilters(){this.selectedPlatform=null,this.selectedLevel=null,this.selectedTag=null,this.searchTerm="",this.emitFilterChange()}emitFilterChange(){this.filterChange.emit({platform:this.selectedPlatform||void 0,level:this.selectedLevel||void 0,tag:this.selectedTag||void 0,searchTerm:this.searchTerm||void 0})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-lesson-filter"]],inputs:{platforms:"platforms",levels:"levels",tags:"tags",selectedPlatform:"selectedPlatform",selectedLevel:"selectedLevel",selectedTag:"selectedTag",searchTerm:"searchTerm"},outputs:{filterChange:"filterChange"},decls:30,vars:24,consts:[[1,"filter-container"],[1,"filter-search"],["type","text",3,"input","placeholder","value"],[1,"filter-options"],[1,"filter-group"],[1,"filter-buttons"],[1,"filter-button",3,"click"],[1,"filter-button",3,"active"],[1,"filter-actions"],[1,"reset-button",3,"click"],[1,"filter-tags"],[1,"filter-tag",3,"active"],[1,"filter-tag",3,"click"]],template:function(e,o){e&1&&(l(0,"div",0)(1,"div",1)(2,"input",2),a(3,"translate"),C("input",function(u){return o.onSearchChange(u)}),r()(),l(4,"div",3)(5,"div",4)(6,"label"),s(7),a(8,"translate"),r(),l(9,"div",5)(10,"button",6),C("click",function(){return o.onPlatformChange(null)}),s(11),a(12,"translate"),r(),L(13,X,3,5,"button",7,T),r()(),l(15,"div",4)(16,"label"),s(17),a(18,"translate"),r(),l(19,"div",5)(20,"button",6),C("click",function(){return o.onLevelChange(null)}),s(21),a(22,"translate"),r(),L(23,Z,3,5,"button",7,T),r()(),f(25,te,7,3,"div",4),r(),l(26,"div",8)(27,"button",9),C("click",function(){return o.resetFilters()}),s(28),a(29,"translate"),r()()()),e&2&&(i(2),J("placeholder",d(3,12,"lessons.filter.search"))("value",o.searchTerm),i(5),c(d(8,14,"lessons.filter.platform")),i(3),O("active",!o.selectedPlatform),i(),x(" ",d(12,16,"lessons.filter.all")," "),i(2),E(o.platforms),i(4),c(d(18,18,"lessons.filter.level")),i(3),O("active",!o.selectedLevel),i(),x(" ",d(22,20,"lessons.filter.all")," "),i(2),E(o.levels),i(2),v(o.tags.length?25:-1),i(3),x(" ",d(29,22,"lessons.filter.reset")," "))},dependencies:[P,M,y],styles:[".filter-container[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:var(--color-surface);border-radius:12px;box-shadow:0 2px 8px #0000001a}.filter-search[_ngcontent-%COMP%]{margin-bottom:1.5rem}.filter-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--color-border);border-radius:8px;font-size:var(--text-base);color:var(--text-primary);background:var(--color-bg)}.filter-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(var(--color-primary-rgb),.2)}.filter-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:var(--text-sm);font-weight:var(--font-weight-medium);color:var(--text-secondary);margin-bottom:.5rem}.filter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);border-radius:6px;background:var(--color-bg);font-size:var(--text-sm);color:var(--text-primary);cursor:pointer;transition:all .2s ease}.filter-button[_ngcontent-%COMP%]:hover{background:var(--color-bg-hover)}.filter-button.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.filter-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:16px;background:var(--color-bg);font-size:var(--text-xs);color:var(--text-secondary);cursor:pointer;transition:all .2s ease;border:1px solid var(--color-border)}.filter-tag[_ngcontent-%COMP%]:hover{background:var(--color-bg-hover)}.filter-tag.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.filter-actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;justify-content:flex-end}.reset-button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;background:var(--color-bg);font-size:var(--text-sm);color:var(--text-secondary);cursor:pointer;transition:all .2s ease}.reset-button[_ngcontent-%COMP%]:hover{background:var(--color-bg-hover);color:var(--text-primary)}@media (max-width: 768px){.filter-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};function ne(t,n){if(t&1&&(l(0,"p",10),s(1),r()),t&2){let e=p();i(),c(e.lesson.description)}}function oe(t,n){if(t&1&&(l(0,"span",14),s(1),r()),t&2){let e=n.$implicit;i(),c(e)}}function ie(t,n){if(t&1&&(l(0,"span",15),s(1),r()),t&2){let e=p(2);i(),x("+",e.lesson.tags.length-3)}}function se(t,n){if(t&1&&(l(0,"div",12),L(1,oe,2,1,"span",14,T),f(3,ie,2,1,"span",15),r()),t&2){let e=p();i(),E(e.lesson.tags.slice(0,3)),i(2),v(e.lesson.tags.length>3?3:-1)}}function re(t,n){if(t&1&&(l(0,"div",13)(1,"span",16),s(2),r()()),t&2){let e=p();i(2),x("v",e.lesson.version)}}var $=class t{constructor(n,e){this.router=n;this.iconsService=e}lesson;navigateToLesson(){this.router.navigate(["/learn",this.lesson.platforms[0],this.lesson.level,this.lesson.slug])}static \u0275fac=function(e){return new(e||t)(N(z),N(U))};static \u0275cmp=b({type:t,selectors:[["app-lesson-card"]],inputs:{lesson:"lesson"},decls:21,vars:12,consts:[[1,"lesson-card",3,"click"],[1,"lesson-card__header"],[1,"lesson-platform"],[1,"platform-icon"],[1,"platform-name"],[1,"lesson-level"],[1,"level-icon"],[1,"level-name"],[1,"lesson-card__content"],[1,"lesson-title"],[1,"lesson-description"],[1,"lesson-card__footer"],[1,"lesson-tags"],[1,"lesson-version"],[1,"lesson-tag"],[1,"lesson-tag","more"],[1,"version-label"]],template:function(e,o){e&1&&(l(0,"div",0),C("click",function(){return o.navigateToLesson()}),l(1,"div",1)(2,"div",2)(3,"span",3),s(4),r(),l(5,"span",4),s(6),a(7,"translate"),r()(),l(8,"div",5)(9,"span",6),s(10),r(),l(11,"span",7),s(12),a(13,"translate"),r()()(),l(14,"div",8)(15,"h3",9),s(16),r(),f(17,ne,2,1,"p",10),r(),l(18,"div",11),f(19,se,4,1,"div",12),f(20,re,3,1,"div",13),r()()),e&2&&(i(4),c(o.iconsService.getPlatformIcon(o.lesson.platforms[0])),i(2),c(d(7,8,"lessons.platform."+o.lesson.platforms[0])),i(4),c(o.iconsService.getLevelIcon(o.lesson.level)),i(2),c(d(13,10,"lessons.level."+o.lesson.level)),i(4),c(o.lesson.title),i(),v(o.lesson.description?17:-1),i(2),v(o.lesson.tags.length?19:-1),i(),v(o.lesson.version?20:-1))},dependencies:[P,M,y],styles:[".lesson-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;transition:transform .3s ease,box-shadow .3s ease;cursor:pointer;display:flex;flex-direction:column;height:100%}.lesson-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.lesson-card__header[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--color-border)}.lesson-platform[_ngcontent-%COMP%], .lesson-level[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:var(--text-xs);color:var(--text-secondary)}.platform-icon[_ngcontent-%COMP%], .level-icon[_ngcontent-%COMP%]{font-size:1.2em}.lesson-card__content[_ngcontent-%COMP%]{padding:1rem;flex:1}.lesson-title[_ngcontent-%COMP%]{font-family:var(--font-display);font-size:var(--text-xl);font-weight:var(--font-weight-bold);margin-bottom:.5rem;color:var(--text-primary);line-height:1.3}.lesson-description[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--text-secondary);line-height:1.5;margin:0;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.lesson-card__footer[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid var(--color-border);display:flex;justify-content:space-between;align-items:center}.lesson-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.lesson-tag[_ngcontent-%COMP%]{padding:.2rem .5rem;background:var(--color-bg);border-radius:12px;font-size:var(--text-xs);color:var(--text-secondary)}.lesson-tag.more[_ngcontent-%COMP%]{background:var(--color-bg-hover)}.lesson-version[_ngcontent-%COMP%]{font-size:var(--text-xs);color:var(--text-secondary);background:var(--color-bg);padding:.2rem .5rem;border-radius:12px}"]})};var q=()=>[],le=(t,n)=>n.slug;function ae(t,n){if(t&1&&(_(0,"p"),s(1),a(2,"translate"),m()),t&2){let e=p();i(),c(d(2,1,"lessons.platform."+e.platform))}}function de(t,n){if(t&1&&(_(0,"p"),s(1),a(2,"translate"),m()),t&2){let e=p();i(),c(d(2,1,"lessons.level."+e.level))}}function ce(t,n){if(t&1&&w(0,"app-lesson-card",7),t&2){let e=n.$implicit;R("lesson",e)}}function pe(t,n){if(t&1&&L(0,ce,1,1,"app-lesson-card",7,le),t&2){let e=p(2);E(e.filteredLessons)}}function me(t,n){t&1&&(_(0,"div",6)(1,"p"),s(2),a(3,"translate"),m()()),t&2&&(i(2),c(d(3,1,"lessons.noLessons")))}function ge(t,n){if(t&1&&f(0,pe,2,0)(1,me,4,3,"div",6),t&2){let e=p();v(e.filteredLessons.length?0:1)}}function fe(t,n){t&1&&(_(0,"div",5)(1,"p"),s(2),a(3,"translate"),m()()),t&2&&(i(2),c(d(3,1,"lessons.loading")))}var j=class t{lessonsService=h(D);_route=h(B);_router=h(z);_translate=h(Q);platform=null;level=null;tag=null;searchTerm="";filteredLessons=[];ngOnInit(){this.lessonsService.lessonsIndex()||this.lessonsService.loadLessonsIndex().subscribe(),this._route.paramMap.subscribe(n=>{this.platform=n.get("platform"),this.level=n.get("level"),this._applyFilters()}),this.lessonsService.lessonsIndex.update(n=>(n&&this._applyFilters(),n))}_applyFilters(){let n=this._translate.currentLang||this._translate.defaultLang||"";this.filteredLessons=this.lessonsService.filterLessons({platform:this.platform||void 0,level:this.level||void 0,lang:n,tag:this.tag||void 0,searchTerm:this.searchTerm||void 0})}onFilterChange(n){if(this.platform=n.platform||null,this.level=n.level||null,this.tag=n.tag||null,this.searchTerm=n.searchTerm||"",n.platform!==void 0||n.level!==void 0){let e=["/learn"];n.platform&&(e.push(n.platform),n.level&&e.push(n.level)),this._router.navigate(e)}else this._applyFilters()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-lessons-list"]],decls:12,vars:16,consts:[[1,"lessons-container"],[3,"filterChange","platforms","levels","tags","selectedPlatform","selectedLevel","selectedTag","searchTerm"],[1,"lessons-list"],[1,"lessons-header"],[1,"lessons-grid"],[1,"lessons-loading"],[1,"lessons-empty"],[3,"lesson"]],template:function(e,o){e&1&&(_(0,"div",0)(1,"app-lesson-filter",1),K("filterChange",function(u){return o.onFilterChange(u)}),m(),_(2,"div",2)(3,"div",3)(4,"h2"),s(5),a(6,"translate"),m(),f(7,ae,3,3,"p"),f(8,de,3,3,"p"),m(),_(9,"div",4),f(10,ge,2,1)(11,fe,4,3,"div",5),m()()()),e&2&&(i(),R("platforms",o.lessonsService.lessonsIndex()?o.lessonsService.lessonsIndex().platforms:k(13,q))("levels",o.lessonsService.lessonsIndex()?o.lessonsService.lessonsIndex().levels:k(14,q))("tags",o.lessonsService.lessonsIndex()?o.lessonsService.lessonsIndex().tags:k(15,q))("selectedPlatform",o.platform)("selectedLevel",o.level)("selectedTag",o.tag)("searchTerm",o.searchTerm),i(4),c(d(6,11,"lessons.title")),i(2),v(o.platform?7:-1),i(),v(o.level?8:-1),i(2),v(o.lessonsService.isLoading()?11:10))},dependencies:[P,M,V,$,y],styles:[".lessons-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.lessons-header[_ngcontent-%COMP%]{margin-bottom:2rem}.lessons-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--font-display);font-size:var(--text-3xl);font-weight:var(--font-weight-bold);margin-bottom:.5rem;color:var(--text-primary)}.lessons-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-lg);color:var(--text-secondary)}.lessons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.lessons-loading[_ngcontent-%COMP%], .lessons-empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;width:100%}.lessons-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .lessons-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--text-lg);color:var(--text-secondary)}@media (max-width: 768px){.lessons-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var W=class t{_lessonsService=h(D);_route=h(B);ngOnInit(){this._lessonsService.loadLessonsIndex().subscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=b({type:t,selectors:[["app-lessons-page"]],decls:9,vars:6,consts:[[1,"lessons-page"],[1,"lessons-page__header"],[1,"page-title"],[1,"page-description"]],template:function(e,o){e&1&&(_(0,"div",0)(1,"div",1)(2,"h1",2),s(3),a(4,"translate"),m(),_(5,"p",3),s(6),a(7,"translate"),m()(),w(8,"app-lessons-list"),m()),e&2&&(i(3),c(d(4,2,"lessons.pageTitle")),i(3),c(d(7,4,"lessons.pageDescription")))},dependencies:[P,M,j,y],styles:[".lessons-page[_ngcontent-%COMP%]{padding:2rem 1rem}.lessons-page__header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 2rem;text-align:center}.page-title[_ngcontent-%COMP%]{font-family:var(--font-display);font-size:var(--text-5xl);font-weight:var(--font-weight-bold);margin-bottom:1rem;color:var(--text-primary)}.page-description[_ngcontent-%COMP%]{font-size:var(--text-xl);color:var(--text-secondary);max-width:800px;margin:0 auto}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:var(--text-4xl)}.page-description[_ngcontent-%COMP%]{font-size:var(--text-lg)}}"]})};export{W as LessonsPageComponent};
